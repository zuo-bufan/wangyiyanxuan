{"version":3,"sources":["webpack:///./src/views/User.vue?3769","webpack:///src/views/User.vue","webpack:///./src/views/User.vue?3db7","webpack:///./src/views/User.vue","webpack:///./src/views/User.vue?e695","webpack:///./src/assets/user.png"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","userInfo","avatar","on","goLogin","_v","_s","username","isLogin","Logout","_l","item","index","key","icon","title","directives","name","rawName","value","expression","staticClass","modalClick","onSubmit","required","message","model","callback","$$v","password","staticStyle","staticRenderFns","component","module","exports"],"mappings":"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","file":"js/chunk-b15c3eb4.a51ffc91.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('header',[_c('img',{attrs:{\"src\":_vm.userInfo.avatar}}),_c('section',{on:{\"click\":_vm.goLogin}},[_vm._v(_vm._s(_vm.userInfo.username))]),_c('van-icon',{attrs:{\"name\":_vm.isLogin ? 'cross' : 'arrow'},on:{\"click\":_vm.Logout}})],1),_c('van-grid',{attrs:{\"column-num\":3,\"square\":\"\"}},_vm._l((_vm.mydata),function(item,index){return _c('van-grid-item',{key:index,attrs:{\"icon\":item.icon,\"text\":item.title}})}),1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShow),expression:\"isShow\"}],staticClass:\"modal\"},[_c('div',{staticClass:\"modal_bg\",on:{\"click\":_vm.modalClick}}),_c('div',{staticClass:\"modal_content\"},[_c('van-form',{on:{\"submit\":_vm.onSubmit}},[_c('van-field',{attrs:{\"name\":\"用户名\",\"label\":\"用户名\",\"placeholder\":\"用户名\",\"rules\":[{ required: true, message: '请填写用户名' }]},model:{value:(_vm.username),callback:function ($$v) {_vm.username=$$v},expression:\"username\"}}),_c('van-field',{attrs:{\"type\":\"password\",\"name\":\"密码\",\"label\":\"密码\",\"placeholder\":\"密码\",\"rules\":[{ required: true, message: '请填写密码' }]},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('div',{staticStyle:{\"margin\":\"16px\"}},[_c('van-button',{attrs:{\"round\":\"\",\"block\":\"\",\"type\":\"danger\",\"native-type\":\"submit\"}},[_vm._v(\"提交\")])],1)],1)],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <header>\r\n            <img :src=\"userInfo.avatar\" />\r\n            <section @click=\"goLogin\">{{ userInfo.username }}</section>\r\n            <van-icon :name=\"isLogin ? 'cross' : 'arrow'\" @click=\"Logout\" />\r\n        </header>\r\n        <!-- square 是正方形宫格 -->\r\n        <van-grid :column-num=\"3\" square>\r\n            <van-grid-item\r\n                    v-for=\"(item, index) in mydata\"\r\n                    :key=\"index\"\r\n                    :icon=\"item.icon\"\r\n                    :text=\"item.title\"\r\n            />\r\n        </van-grid>\r\n        <!-- 登录层弹出框 -->\r\n        <div class=\"modal\" v-show=\"isShow\">\r\n            <div class=\"modal_bg\" @click=\"modalClick\"></div>\r\n            <div class=\"modal_content\">\r\n                <van-form @submit=\"onSubmit\">\r\n                    <van-field\r\n                            v-model=\"username\"\r\n                            name=\"用户名\"\r\n                            label=\"用户名\"\r\n                            placeholder=\"用户名\"\r\n                            :rules=\"[{ required: true, message: '请填写用户名' }]\"\r\n                    />\r\n                    <van-field\r\n                            v-model=\"password\"\r\n                            type=\"password\"\r\n                            name=\"密码\"\r\n                            label=\"密码\"\r\n                            placeholder=\"密码\"\r\n                            :rules=\"[{ required: true, message: '请填写密码' }]\"\r\n                    />\r\n                    <div style=\"margin: 16px\">\r\n                        <van-button round block type=\"danger\" native-type=\"submit\"\r\n                        >提交</van-button\r\n                        >\r\n                    </div>\r\n                </van-form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import { LoginApi } from \"@/request/api\";\r\n    export default {\r\n        data() {\r\n            return {\r\n                // 有无token 是否已登录\r\n                isLogin: localStorage.getItem(\"token\"),\r\n                // 用户信息\r\n                userInfo: {\r\n                    avatar: require(\"@/assets/user.png\"),\r\n                    username: \"点击登录\",\r\n                },\r\n                mydata: [\r\n                    { title: \"我的订单\", icon: \"label-o\" },\r\n                    { title: \"优惠券\", icon: \"bill-o\" },\r\n                    { title: \"礼品卡\", icon: \"goods-collect-o\" },\r\n                    { title: \"我的收藏\", icon: \"location-o\" },\r\n                    { title: \"我的足迹\", icon: \"flag-o\" },\r\n                    { title: \"会员福利\", icon: \"contact\" },\r\n                    { title: \"地址管理\", icon: \"aim\" },\r\n                    { title: \"账号安全\", icon: \"warn-o\" },\r\n                    { title: \"联系客服\", icon: \"service-o\" },\r\n                    { title: \"帮助中心\", icon: \"question-o\" },\r\n                    { title: \"意见反馈\", icon: \"smile-comment-o\" },\r\n                ],\r\n                isShow: false,\r\n                username: \"\",\r\n                password: \"\",\r\n            };\r\n        },\r\n        created() {\r\n            let token = localStorage.getItem(\"token\");\r\n            // 如果已经登录\r\n            if (token) {\r\n                // 渲染用户信息\r\n                this.userInfo = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n            }\r\n        },\r\n        methods: {\r\n            // 登录页面\r\n            goLogin() {\r\n                // 如果已经登录，不需要弹出登录表单\r\n                let token = localStorage.getItem(\"token\");\r\n                if (!token) {\r\n                    this.isShow = true;\r\n                }\r\n            },\r\n            // 退出登录\r\n            Logout() {\r\n                // 清除 localStorage\r\n                localStorage.clear();\r\n                this.$router.go(0);\r\n            },\r\n            modalClick() {\r\n                this.isShow = false;\r\n            },\r\n            onSubmit(values) {\r\n                // console.log(\"submit\", values);\r\n                LoginApi({\r\n                    username: values[\"用户名\"],\r\n                    pwd: values[\"密码\"],\r\n                }).then((res) => {\r\n                    console.log(res);\r\n                    if (res.errno == 0) {\r\n                        // 成功\r\n                        // 储存token，保存用户信息\r\n                        let { token, userInfo } = res.data;\r\n                        localStorage.setItem(\"token\", token);\r\n                        // localStorage只能保存简单类型数据\r\n                        localStorage.setItem(\"userInfo\", JSON.stringify(userInfo));\r\n                        // 登录框消失\r\n                        this.isShow = false;\r\n                        this.userInfo = userInfo;\r\n                        // 箭头变成X\r\n                        this.isLogin = true;\r\n                    } else {\r\n                        // 失败\r\n                        this.$toast(\"账号或密码有误\");\r\n                    }\r\n                });\r\n            },\r\n        },\r\n    };\r\n</script>\r\n\r\n<style lang = \"less\" scoped>\r\n    header {\r\n        background-color: rgb(51, 51, 51);\r\n        color: #fff;\r\n        display: flex;\r\n        justify-content: space-around;\r\n        padding: 20px 10px;\r\n        height: 70px;\r\n        align-items: center;\r\n        img {\r\n            border-radius: 50%;\r\n            width: 70px;\r\n        }\r\n        section {\r\n            flex: 1;\r\n            margin-left: 10px;\r\n        }\r\n    }\r\n    .modal {\r\n        position: fixed;\r\n        top: 0;\r\n        left: 0;\r\n        height: 100%;\r\n        width: 100%;\r\n        z-index: 444;\r\n        .modal_bg {\r\n            height: 100%;\r\n            width: 100%;\r\n            background: rgba(0, 0, 0, 0.3);\r\n        }\r\n        .modal_content {\r\n            width: 90%;\r\n            height: 200px;\r\n            position: absolute;\r\n            background-color: #fff;\r\n            top: 0;\r\n            left: 0;\r\n            right: 0;\r\n            bottom: 0;\r\n            margin: auto;\r\n            padding: 20px 0;\r\n        }\r\n    }\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./User.vue?vue&type=template&id=1c06b6ac&scoped=true&\"\nimport script from \"./User.vue?vue&type=script&lang=js&\"\nexport * from \"./User.vue?vue&type=script&lang=js&\"\nimport style0 from \"./User.vue?vue&type=style&index=0&id=1c06b6ac&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1c06b6ac\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=style&index=0&id=1c06b6ac&lang=less&scoped=true&\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAAB+BAMAAAAQDbi7AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAASUExURfjz8NTIvOPa0drQxe3l3/Pt6dJ8uJYAAAGKSURBVFjD7ZjNboMwEIT5vccxuZPS3qHJA4SouQPp+z9LkSJVBduw42mEqnrun9de744XoigoKCgoKCjoN5V/VI1Sp5eLH34d4YdePejPb3rUGQ+uJkIXiNVMJcanc35P8uAGEsVtwOQVVAWZyddkfOgAR5NXHZN+7AZs4YEE5DZcHZjsjyq44wMXYOe1f/c9FPg/wqdP4TXjHlD9sjzbfxnZ/3b/2Mn9q+H8y+5/cv8crPyppI4vv8DEwWuu/MV8vHH89En5K6jyBxrAwddU+QIF3Nv5jvMfTfa/3D+ilpx/soac3zJy/oyI7NkdsMD4lhp/LR4AfoQl3PeHkYAa5Xsm+0YNlzAf3ZnTz0poF/j/xl9/NoB+v2H0YPgHskJWWZ/fm8/WJ3uQvEB5pZzSb17WD/yIGdSK9h2FLy8gwJcWEOFuN0qUUGefzK/a6VGMK90t++2qCvHQ59BFNLK4deDCGxnoQX5+BQ3KF9T25y9yDPPTabbF+dKz9qwTSUPyOD59U7bmm634LwhiuCxbAoGfAAAAAElFTkSuQmCC\""],"sourceRoot":""}